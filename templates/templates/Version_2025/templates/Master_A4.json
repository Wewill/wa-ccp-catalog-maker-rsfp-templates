{"content":"\/\/ Redefine pageSize \nccppm_global.pageSize = { width: 595.28, height: 793.7066666676 }; \/\/21x28: [595.28, 793.7066666676]\nccppm_global.catalogueID = 'A4';\nccppm_global.sectionsHaveDescription = false; \/\/ #41\n\n\n\/\/ccppm_global.renderDpi = 72; \/\/ Sinon 9\nconsole.log('ccppm_global.renderDpi', ccppm_global.renderDpi);\n\/\/ Marges \nvar grandFond = 60; \/\/ ext\u00e9rieurs\nvar petitFond = 40; \/\/ Int\u00e9rieurs\nvar deTete = 40;\nvar dePied = 40;\n\nvar styles = {\n\t\/*curPage: {\n     \tfont:'Stereonic_Bold', \n      \tfontSize:7,\n      \tbold:true,\n      \tmargin:[0,3,0,0],\n    },*\/\n};\n\nvar foliotageOddGap = 132;\nvar foliotageEvenGap = 25; \/\/ #41\nvar foliotagePadding = 28; \/\/ #41\nvar foliotageFromBottom = 30;\n\nvar dd = {\n  \t\/\/ Foliotage\n\tfooter: function(currentPage, pageCount, pageSize) {\n      tab = ccppm_global.get_tab(dd.content, currentPage);\n      tab = tab[0];\n      if (tab.hidden)\n        return [];\n      return [\n        { \n              table: {\n                  body: [\n                    [{ text: currentPage, style:'curPage'},\n                      { svg: ccppm_global.ico_foliotage,width: 100,margin:[0,3.5,0,0]}],\n                    ]\n              },\n              layout: 'noBorders',\n              absolutePosition: (currentPage % 2) ? { \n                x: (pageSize.width-foliotageOddGap-(ccppm_global.tabWidth+foliotagePadding)), \n                y: pageSize.height - foliotageFromBottom \n              } : { \n                  x: ccppm_global.tabWidth+foliotagePadding+foliotageEvenGap, \n                  y: pageSize.height - foliotageFromBottom\n              },\n          },        \n      ]\n   },\n  \n\t\/\/ Header \n    header: function(currentPage, pageCount, pageSize) {\n      \treturn [ ];\n    },\n\n\t\/\/AFRIQUE caraibes d\\'hier et d\\'Aujourdh'ui\n  \n    \/*content: [\n      {text: 'test', style: 'sectionTitle', color: 'white', tocItem: true, tocMargin: ccppm_global.tocMarginLevel1, tocStyle: ccppm_global.tocStyleLevel1, contentTab: ccppm_global.set_tab({title: 'Jury', subtitle: 'Pr\u00e9sidente', color: data.color_print})},\ndisplay_content()\n    ],*\/\n    content: display_content(),\n  \t\/\/content: data_test,\n  \t\/\/ Styles \n    styles: display_style('_Styles'),\n    \/\/ DefaultStyles\n    defaultStyle: {\n      font: 'Bureau_Grot',\n      color: ccppm_global.black,\n    },\n    \/\/ Page setup \n    info: {\n        title: 'Catalogue 2019 du Festival International du Film d\\'Amiens',\n        author: 'Direction de la publication : \u00c9quipe du FIFAM - Direction artistique : Annouchaka De Andrade - Conception : Justin Petermann & Wilhem Arnoldy',\n        subject: 'Le catalogue pr\u00e9sente l\\'ensemble de la programmation de l\\'\u00e9dition 39',\n        keywords: 'film,festival,catalogue',\n    },\n    compress: false,\n    pageSize: ccppm_global.pageSize, \n    pageOrientation: 'portrait',\n\/\/  pageMargins:[0,0,0,dePied],\n    pageMargins : function(currentPage) {\n      var margins = {};\n      if ((currentPage + 1) % 2) { \/\/ impair\n        margins = {left:ccppm_global.tabWidth,top:40, right:0,bottom:40};\n      } else { \/\/ pair\n        margins = {left:0,top:40, right:ccppm_global.tabWidth,bottom:40};\n      }\n      console.log(currentPage, margins);\n      return margins;\n    },\n    pageBreakBefore: function(currentNode, followingNodesOnPage, nodesOnNextPage, previousNodesOnPage) {\n     return currentNode.headlineLevel === 1 && followingNodesOnPage.length === 0;\n  } \/\/ https:\/\/pdfmake.github.io\/docs\/document-definition-object\/page\/#dynamically-control-page-breaks-for-instance-to-avoid-orphan-children\n}\n\n\ndd.header = function(currentPage, pageCount, pageSize) {\n  tab = ccppm_global.get_tab(dd.content, currentPage);\n  tab = tab[0];\n  if (tab.hidden)\n    return [];\n  return [\n    {\n      canvas: [\n        {\n          type: 'rect',\n          x: ((currentPage + 1)  % 2) ? (-ccppm_global.cropMarksBleedOff) : pageSize.width - ccppm_global.tabWidth,\n          y: 0,\n          w: ccppm_global.tabWidth, \n          h: pageSize.height,\n          color: tab.color, \/\/ Couleur CMJN\n        },\n      ]\n    },\n    { \n      table: {\n        widths: [ ccppm_global.tabWidth-10 ],\n        body: ccppm_global.rotatedTextTableBody(tab),\n      },\n      layout: \"noBorders\",\n      absolutePosition: { x:((currentPage + 1) % 2) ? 2 : pageSize.width - ccppm_global.tabWidth-2, y:90 }\n    }\n  ]\n};\n\ndd.header = function(currentPage, pageCount, pageSize) {\n  tab = ccppm_global.get_tab(dd.content, currentPage);\n  return ccppm_global.get_tab_display(currentPage, pageSize, tab);\n};\n\nccppm_global.master = dd;","type":"master","elements_count":"0","master_select_render":"","elements_ids":""}