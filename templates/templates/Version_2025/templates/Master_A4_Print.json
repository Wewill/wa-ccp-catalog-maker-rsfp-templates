{"content":"\/\/ Redefine pageSize \nccppm_global.pageSize = { width: 595.28, height: 793.7066666676 }; \/\/21x28: [595.28, 793.7066666676]\nccppm_global.catalogueID = 'A4';\nccppm_global.sectionsHaveDescription = false; \/\/ #41\n\n\n\/\/ccppm_global.renderDpi = 300; \/\/ Sinon 9\nconsole.log('ccppm_global.renderDpi', ccppm_global.renderDpi);\nccppm_global.black = [0,0,0,100]; \/\/ PRINT \n\n\/\/2,834646761984861 = 1mm tir\u00e9 de 4A0 calcul\n\/\/1pt = 0,352778 mm\n\/\/1pdf unite = 1pt\nccppm_global.cropMarksLength = 28.3464676198; \/\/ 10mm : 28.3464676198\n\nccppm_global.pageSize= {\n\twidth: ccppm_global.pageSize.width + ccppm_global.cropMarksLength * 2,\n  \theight: ccppm_global.pageSize.height + ccppm_global.cropMarksLength * 2,\n}\n\n\/\/ 2mm : 5.669333333333334 \/ 3mm : 8.504 \/ 5mm : 14.1732338099\nccppm_global.cropMarksSpace = 14.1732338099; \/\/5mm\nccppm_global.cropMarksOverlay  = 5.669333333333334; \/\/2mm\n\nccppm_global.cropMarksLineWidth = 0.3; \/\/.25\nccppm_global.cropMarksRectWidth = 2; \/\/ 20\nccppm_global.cropMarksMarksLength = ccppm_global.cropMarksLength - ccppm_global.cropMarksSpace;\n\nccppm_global.cropMarksBleedOff = 14.1732338099; \/\/ 5mm : 14.1732338099\n\nccppm_global.cropMarksDrawHorizontal = function(x_position, y_position, bg = true, appendHeightLength = 0) {\n  var color = false;\n  var lineWidth = false;\n  if (bg) {\n    color = [0,0,0,100]; \/\/ Trait de coupe\n    lineWidth = ccppm_global.cropMarksLineWidth;\n  } else {\n    color = [0,0,0,0]; \/\/ fond blanc\n    lineWidth = ccppm_global.cropMarksRectWidth;\n  }\n  var x = 0;\n  var y = 0;\n  if (x_position == 'left') {\n  } else {\n     x += ccppm_global.pageSize.width - ccppm_global.cropMarksLength + ccppm_global.cropMarksSpace - ccppm_global.cropMarksOverlay;\n  }\n  if (y_position == 'bottom') {\n    y -= lineWidth \/ 2 + ccppm_global.cropMarksSpace;\n  } else {\n    y -= ccppm_global.pageSize.height - ccppm_global.cropMarksLength * 2 + lineWidth \/ 2 + ccppm_global.cropMarksSpace;\n  }\n  y += appendHeightLength;\n  return {\n    type: 'rect',\n    x: x,\n    y: y,\n    w: ccppm_global.cropMarksMarksLength + ccppm_global.cropMarksOverlay,\n    h: lineWidth,\n    color: color, \/\/ Couleur CMJN\n  }\n}\n\nccppm_global.cropMarksDrawVertical = function(x_position, y_position, bg = true, appendHeightLength = 0) {\n  var color = false;\n  var lineWidth = false;\n  if (bg) {\n    color = [0,0,0,100];\n    lineWidth = ccppm_global.cropMarksLineWidth;\n  } else {\n    color = [0,0,0,0];\n    lineWidth = ccppm_global.cropMarksRectWidth;\n  }\n  var x = 0;\n  var y = 0;\n  if (x_position == 'left') {\n    x += ccppm_global.cropMarksLength - lineWidth \/ 2;\n  } else {\n    x += ccppm_global.pageSize.width - ccppm_global.cropMarksLength - lineWidth \/ 2;\n  }\n  if (y_position == 'bottom') {\n    y += ccppm_global.cropMarksSpace - ccppm_global.cropMarksSpace - ccppm_global.cropMarksOverlay;\n  } else {\n    y -= ccppm_global.pageSize.height - ccppm_global.cropMarksLength + ccppm_global.cropMarksSpace;\n  }\n  y += appendHeightLength;\n  return {\n    type: 'rect',\n    x: x,\n    y: y,\n    w: lineWidth ,\n    h: ccppm_global.cropMarksMarksLength + ccppm_global.cropMarksOverlay,\n    color: color, \/\/ Couleur CMJN\n  }\n}\nvar borderLineWidth = 0.25;\nvar borderLineDisplay = false;\nvar marginsDisplay = false;\nccppm_global.cropMarksDisplay = function(appendHeight = false) {\n\tvar canvas = [];\n  \tvar appendHeightLength = 0;\n  \tif (appendHeight)\n      appendHeightLength =  - ccppm_global.cropMarksLength + ccppm_global.pageSize.height + ccppm_global.cropMarksSpace;\n  \t\/\/console.log (appendHeightLength)\n  \n  \tif (borderLineDisplay) {\n      canvas.push({\n        type: 'rect',\n        x: 0,\n        y: -borderLineWidth - ccppm_global.cropMarksSpace + appendHeightLength,\n        w: ccppm_global.pageSize.width,\n        h: borderLineWidth, \n        color: [0,0,0,20], \/\/ Couleur CMJN\n\t  });\n      canvas.push({\n        type: 'rect',\n        x: 0,\n        y: - ccppm_global.pageSize.height + ccppm_global.cropMarksLength * 2 - ccppm_global.cropMarksSpace + appendHeightLength, \n        w: ccppm_global.pageSize.width,\n        h: borderLineWidth,\n        color: [0,0,0,20], \/\/ Couleur CMJN\n\t  });\n      canvas.push({\n        type: 'rect',\n        x: ccppm_global.cropMarksLength,\n        y: - ccppm_global.pageSize.height + ccppm_global.cropMarksLength  - ccppm_global.cropMarksSpace + appendHeightLength,\n        w: borderLineWidth, \n        h: ccppm_global.pageSize.height ,\n        color: [0,0,0,20], \/\/ Couleur CMJN\n\t  });\n      canvas.push({\n        type: 'rect',\n        x: ccppm_global.pageSize.width - ccppm_global.cropMarksLength - borderLineWidth,\n        y: - ccppm_global.pageSize.height - ccppm_global.cropMarksLength - ccppm_global.cropMarksSpace + appendHeightLength,\n        w: borderLineWidth, \n        h: ccppm_global.pageSize.height + ccppm_global.cropMarksLength * 2,\n        color: [0,0,0,20], \/\/ Couleur CMJN\n\t  });\n    }\n\n    if (marginsDisplay) {\n      canvas.push({\n        type: 'rect',\n        x: 0,\n        y: -borderLineWidth - ccppm_global.cropMarksSpace + appendHeightLength - ccppm_global.insideMargins[3],\n        w: ccppm_global.pageSize.width,\n        h: borderLineWidth, \n        color: [100,0,0,0], \/\/ Couleur CMJN\n\t  });\n      canvas.push({\n        type: 'rect',\n        x: 0,\n        y: - ccppm_global.pageSize.height + ccppm_global.cropMarksLength * 2 - ccppm_global.cropMarksSpace + appendHeightLength + ccppm_global.insideMargins[1], \n        w: ccppm_global.pageSize.width,\n        h: borderLineWidth,\n        color: [100,0,0,0], \/\/ Couleur CMJN\n\t  });\n      canvas.push({\n        type: 'rect',\n        x: ccppm_global.cropMarksLength + ccppm_global.insideMargins[0],\n        y: - ccppm_global.pageSize.height + ccppm_global.cropMarksLength  - ccppm_global.cropMarksSpace + appendHeightLength,\n        w: borderLineWidth, \n        h: ccppm_global.pageSize.height ,\n        color: [100,0,0,0], \/\/ Couleur CMJN\n\t  });\n      canvas.push({\n        type: 'rect',\n        x: ccppm_global.pageSize.width - ccppm_global.cropMarksLength - borderLineWidth - ccppm_global.insideMargins[2],\n        y: - ccppm_global.pageSize.height - ccppm_global.cropMarksLength - ccppm_global.cropMarksSpace + appendHeightLength,\n        w: borderLineWidth, \n        h: ccppm_global.pageSize.height + ccppm_global.cropMarksLength * 2,\n        color: [100,0,0,0], \/\/ Couleur CMJN\n\t  });\n    }\n  \n  \tcanvas.push(ccppm_global.cropMarksDrawHorizontal('left', 'bottom', false, appendHeightLength));\n    canvas.push(ccppm_global.cropMarksDrawVertical('left', 'bottom', false, appendHeightLength));\n    canvas.push(ccppm_global.cropMarksDrawHorizontal('left', 'top', false, appendHeightLength));\n    canvas.push(ccppm_global.cropMarksDrawVertical('left', 'top', false, appendHeightLength));\n\tcanvas.push(ccppm_global.cropMarksDrawHorizontal('right', 'top', false, appendHeightLength));\n    canvas.push(ccppm_global.cropMarksDrawVertical('right', 'top', false, appendHeightLength));\n    canvas.push(ccppm_global.cropMarksDrawHorizontal('right', 'bottom', false, appendHeightLength));\n    canvas.push(ccppm_global.cropMarksDrawVertical('right', 'bottom', false, appendHeightLength));\n    \n    canvas.push(ccppm_global.cropMarksDrawHorizontal('left', 'bottom', true, appendHeightLength));\n    canvas.push(ccppm_global.cropMarksDrawVertical('left', 'bottom', true, appendHeightLength));\n    canvas.push(ccppm_global.cropMarksDrawHorizontal('left', 'top', true, appendHeightLength));\n    canvas.push(ccppm_global.cropMarksDrawVertical('left', 'top', true, appendHeightLength));\n\tcanvas.push(ccppm_global.cropMarksDrawHorizontal('right', 'top', true, appendHeightLength));\n    canvas.push(ccppm_global.cropMarksDrawVertical('right', 'top', true, appendHeightLength));\n    canvas.push(ccppm_global.cropMarksDrawHorizontal('right', 'bottom', true, appendHeightLength));\n    canvas.push(ccppm_global.cropMarksDrawVertical('right', 'bottom', true, appendHeightLength));\n  return {\n  \tcanvas: canvas\n  }\n}\n\/*\nvar display_content = function() {\n  return [\n    {text:'Atest', font: 'Stereonic_Bold', fontSize:100},\n  {text: 'test', contentTab: ccppm_global.set_tab({title: 'Atest', color: false})},\n  {'text': '', pageBreak: 'after'},\n  {text: 'test2', contentTab: ccppm_global.set_tab({title: 'subtest', subtitle: 'subtest2', color: [30, 50, 0, 0]})}\n]}\n*\/\n\/\/ Marges \nvar grandFond = ccppm_global.masterMargins[0]; \/\/ ext\u00e9rieurs\nvar petitFond = ccppm_global.masterMargins[2]; \/\/ Int\u00e9rieurs\nvar deTete = ccppm_global.masterMargins[1];\nvar dePied = ccppm_global.masterMargins[3];\n\nvar styles = {\n\n};\n\nvar foliotageOddGap = 132;\nvar foliotageEvenGap = 25; \/\/ #41\nvar foliotagePadding = 28; \/\/ #41\nvar foliotageFromBottom = 30;\n\nvar dd = {\n  \t\/\/ Foliotage\n\tfooter: function(currentPage, pageCount, pageSize) { \n      tab = ccppm_global.get_tab(dd.content, currentPage);\n  \t  tab = tab[0];\n      if (tab.hidden)\n        return [];\n      return [\n        { \n              table: {\n                  body: [\n                    [{ text: currentPage, style:'curPage'},\n                      { svg: ccppm_global.ico_foliotage,width: 110,margin:[0,3.5,0,0]}],\n                    ]\n              },\n              layout: 'noBorders',\n              absolutePosition: (currentPage % 2) ? { \n                x: (pageSize.width-foliotageOddGap-(ccppm_global.tabWidth+foliotagePadding) - ccppm_global.cropMarksLength), \n                y: pageSize.height - foliotageFromBottom - ccppm_global.cropMarksLength\n              } : { \n                x: ccppm_global.tabWidth+foliotagePadding+foliotageEvenGap + ccppm_global.cropMarksLength, \n                y: pageSize.height - foliotageFromBottom - ccppm_global.cropMarksLength\n              },\n          },        \n      ]\n   },\n  \n\t\/\/ Header \n    header: function(currentPage, pageCount, pageSize) {\n      \treturn [ ];\n    },\n\n    content: display_content(),\n  \t\/\/content: data_test,\n  \t\/\/ Styles \n    styles: display_style('_Styles'),\n    \/\/ DefaultStyles\n    defaultStyle: {\n      font: 'Bureau_Grot',\n      color: ccppm_global.black,\n    },\n    \/\/ Page setup \n    info: {\n        title: 'Catalogue du Festival International du Film d\\'Amiens',\n        author: 'Direction de la publication : \u00c9quipe du FIFAM - Direction artistique : Annouchaka De Andrade - Conception : Justin Petermann & Wilhem Arnoldy',\n        subject: 'Le catalogue pr\u00e9sente l\\'ensemble de la programmation de l\\'\u00e9dition 39',\n        keywords: 'film,festival,catalogue',\n    },\n    compress: false,\n    pageSize: ccppm_global.pageSize, \n    pageOrientation: 'portrait',\n\/\/  pageMargins:[0,0,0,dePied],\n    pageMargins : function(currentPage) {\n      var margins = {};\n      if ((currentPage + 1) % 2) { \/\/ impair\n        margins = {left:ccppm_global.tabWidth + ccppm_global.cropMarksLength,top:40 + ccppm_global.cropMarksLength, right:0 + ccppm_global.cropMarksLength,bottom:40 + ccppm_global.cropMarksLength, cropMarksLength: ccppm_global.cropMarksLength};\n      } else { \/\/ pair\n        margins = {left:0+ ccppm_global.cropMarksLength,top:40 + ccppm_global.cropMarksLength, right:ccppm_global.tabWidth + ccppm_global.cropMarksLength,bottom:40+ ccppm_global.cropMarksLength, cropMarksLength: ccppm_global.cropMarksLength};\n      }\n      console.log(currentPage, margins);\n      return margins;\n    },\n    pageBreakBefore: function(currentNode, followingNodesOnPage, nodesOnNextPage, previousNodesOnPage) {\n     return currentNode.headlineLevel === 1 && followingNodesOnPage.length === 0;\n  } \/\/ https:\/\/pdfmake.github.io\/docs\/document-definition-object\/page\/#dynamically-control-page-breaks-for-instance-to-avoid-orphan-children\n}\n\n\ndd.header = function(currentPage, pageCount, pageSize) {\n  tab = ccppm_global.get_tab(dd.content, currentPage);\n  return ccppm_global.get_tab_display(currentPage, pageSize, tab);\n};\n\nccppm_global.master = dd;","type":"master","elements_count":"0","master_select_render":"","elements_ids":""}